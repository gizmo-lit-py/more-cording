# 2025-11-24
-今日やったこと：jsonの昨日を追加した。
-コード：
import json

class Task:


    def __init__(self,id,title,due_date,priority=2):
        self.id = id
        self.title = title
        self.due_date = due_date
        self.priority = priority
        self.is_done = False
    
    def complete(self):
        self.is_done = True

    def info(self):
        if self.is_done == True:
            status = '完了'
        else:
            status = '未完了'
        return f'[ID:{self.id}][{status}][優先度{self.priority}]{self.title} - {self.due_date}'
    
    def to_dict(self):
        return {
            "id": self.id,
            "title": self.title,
            "due_date": self.due_date,
            "priority": self.priority,
            "is_done": self.is_done
        }
    @classmethod
    def from_dict(cls,data):
        id = data['id']
        title = data['title']
        due_date = data['due_date']
        priority = data['priority']
        task = cls(id,title,due_date,priority)
        task.is_done = data.get('is_done',False)
        return task
     
    @staticmethod
    def sort_by_priority(tasks):
        def get_priority(task):
            return task.priority
        return sorted(tasks,key=get_priority)
      
class TaskManager:

    def __init__(self):
        self.task_list = []

    def add(self,task):
        self.task_list.append(task)
        print('タスクを追加しました。')

    def list_tasks(self):
        if not self.task_list:
            print('タスクがありません。')
            return
        for task in self.task_list:
            print(task.info())

    def complete(self,task_id):
        for task in self.task_list:
            if task.id == task_id:
                task.complete()
                print('タスクを完了にしました。')
                return
        print('そのタスクは見つかりませんでした。')

    def delete(self,task_id):
        for task in self.task_list:
            if task.id == task_id:
                self.task_list.remove(task)
                print('タスクを削除しました。')
                return
        print('そのタスクは見つかりませんでした。')   
    

    def search(self,keyword):
        found = False
        for task in self.task_list:
            if keyword in task.title:
                print(task.info())
                found = True
    
        if not found:
            print('見つかりませんでした。')
#json保存    
    def save_to_json(self,filename):
        data = []
        for task in self.task_list:
            dict_data = task.to_dict()
            data.append(dict_data)
        
        with open(filename,"w",encoding="utf-8") as f:
            json.dump(data, f, ensure_ascii=False, indent=4)

        print("JSON に保存しました。")
#json読み込み
    def load_from_json(self,filename):
        try:
            with open(filename,"r", encoding="utf-8") as f:
                data = json.load(f)
            self.task_list = []

            for d in data:
                task = Task.from_dict(d)
                self.task_list.append(task)
            
            print("JSONから読み込みました。")
        
        except FileNotFoundError:
            print("ファイルがありません。初期状態で開始します。")
    
    







        
