#2025-12-08
-今日やったこと:wishlistappにJSON機能を追加した。完成
-コード:
import json

class Item:
    def __init__(self,brand,name,price,note=''):
        self.brand = brand
        self.name = name
        self.price = price
        self.is_bought = False
        self.note = note
    
    def info(self):
        if self.is_bought == True:
            status = '購入済み'
        else:
            status = '未購入'
        return f"ブランド:{self.brand} / 名前:{self.name} / 値段{self.price} 円 メモ:{self.note} {status}"
    
    def to_dict(self):
        return{
            'brand': self.brand,
            'name': self.name,
            'price': self.price,
            'is_bought': self.is_bought,
            'note': self.note

        }
    
    @classmethod
    def from_dict(cls,data):
        brand = data['brand']
        name = data['name']
        price = data['price']
        note = data['note']
        is_bought = data.get('is_bought',False)

        item = cls(brand,name,price,note)
        item.is_bought = is_bought

        return item

class WishListApp:
    def __init__(self):
        self.items = []
        self.load_from_json('wishlist.json')

    
    def add_items(self):
        print('---アイテム追加---')
        brand = input('ブランド名を入力してください：')
        name = input('アイテム名を入力してください：')
        price = int(input('値段を入力してください：'))
        note = input('メモ(なければ空でもOK):')

        item = Item(brand,name,price,note)
        self.items.append(item)

        print(f'{item.brand}/{item.name} を追加しました。')
        
    
    def show_items(self):
        if not self.items:
            print('アイテムがありません。')
            return
        
        for item in self.items:
            print(item.info())

    def show_total(self):
        total = 0
        if not self.items:
            print('アイテムがありません。')
            return
        
        for item in self.items:
            if item.is_bought == False:
                total += item.price
        
        print(f'未購入アイテムの金額は{total}円です。')
        
    def show_bought_items(self):
        if not self.items:
            print('アイテムはまだありません。')
            return
        
        has_bought = False
        for item in self.items:
            if item.is_bought == True:
                print(item.info())
                has_bought =True
        
        if not has_bought:
            print('購入済みのアイテムはまだありません。')

    def mark_as_bought(self):
        if not self.items:
            print('アイテムはまだありません')
            return
        for i,item in enumerate(self.items,start=1):
            if item.is_bought == True:
                status = '購入済み'
            else:
                status = '未購入'
            print(f"{i}.{item.brand}/{item.name}/{item.price}円/{status}")

        num = int(input('購入済みに変更したい番号を入力してください：'))
        index = num - 1
        if 0 <= index < len(self.items):
            selected = self.items[index]
            selected.is_bought =True
            print(f'{selected.brand}/{selected.name} を購入済みに変更しました。')
        else:
            print('不正な番号です。')
        
    def save_to_file(self,filepath='wishlist.json'):
        data = []
        for item in self.items:
            dict_data = item.to_dict()
            data.append(dict_data)

        with open(filepath,'w',encoding='utf-8') as f:
            json.dump(data, f,ensure_ascii=False, indent=4)
        
        print('JSON に保存しました。')
    
    def load_from_json(self,filepath):
        try:
            with open(filepath,'r', encoding='utf-8') as f:
                data = json.load(f)
        except FileNotFoundError:

            return
        
        self.items = []
        for d in data:
            item = Item.from_dict(d)
            self.items.append(item)

            


    
    def show_menu(self):
        print('===欲しいものアプリ===')
        print('1.アイテムを追加する')
        print('2.アイテム一覧表示')
        print('3.未購入アイテムの合計金額を表示する')
        print('4.購入済みに変更する')
        print('5.購入済みアイテムを一覧表示する')
        print('6.アプリを終了する')
        print('=====================')

    def run(self):
        while True:
            self.show_menu()
            choice = input('番号を選んでください：')

            if choice == '1':
                self.add_items()

            elif choice == '2':
                self.show_items()

            elif choice == '3':
                self.show_total()
            
            elif choice == '4':
                self.mark_as_bought()

            elif choice == '5':
                self.show_bought_items()

            elif choice == '6':
                self.save_to_file()
                print('アプリを終了します')
                break
            
            else:
                print('無効な番号です。')

                
app = WishListApp()
app.run()

                
                
    

        
